<html>
<head>
	<meta charset="UTF-8">
	<title>Suggestion Box</title>
	<link rel="stylesheet" href="./style/sweetalert.css">
	<script src="./js/sweetalert.min.js"></script>
	<style>
		.modal {
			background-color: #eee;
			padding: 2em;
			position: relative;
			top: 50%;
			transform: translateY(-50%);
		}
	</style>
</head>
<body>
	<button id="makeButton" onclick="makeSuggestion()">Make</button>
	<button id="takeButton" onclick="takeSuggestion()">Take</button>
	<script src="./js/app.js"></script>
	<script>
		suggestionBox.list(function(res) {
			console.log(res)
		})

		function makeSuggestion(){
		}

		function takeSuggestion(){
			suggestionBox.takeSuggestion(function(res, currentId){
				suggestion = JSON.parse(res.responseText).suggestion ||
								JSON.parse(res.responseText).status
				id = currentId
				console.log(id)
				console.log("And I have: "+id)
				console.log(suggestion)
				console.log(res)
				sweetAlert({   
				title: "Suggestion",
				text: suggestion+" ",
				showCancelButton: true,
				allowOutsideClick: false,
				allowEscapeKey: false,
				confirmButtonText: "Great!",
				cancelButtonText: "Meh",
				closeOnConfirm: true,
				closeOnCancel: true }, 
				function(isConfirm){
					if (isConfirm) {
						suggestionBox.suggestionRatedGreat(suggestion.currentId, function(res){
							console.log(res.responseText)
						})
					} else {
						suggestionBox.suggestionRatedMeh(suggestion.currentId, function(res){
							console.log(res.responseText)
						})
					}
				})
			})
		}
	</script>
</body>
</html>